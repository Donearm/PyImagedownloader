<?xml version="1.0" encoding="ISO-8859-1"?>
<root>
<host id="10pix">
<urlpattern>^http:\/\/www\.10pix\.com\/show\.php\/</urlpattern>
<searchpattern>"REPLACE: 'show\\.php\\/(.+)\\.html' , 'out.php/i$1'"</searchpattern>
</host>

<host id="adultimagehoster">
<urlpattern>^http:\/\/adultimagehoster\.com\/viewer.php\?</urlpattern>
<searchpattern>"REPLACE: 'viewer\\.php\\?id=' , 'images/'"</searchpattern>
</host>

<host id="allyoucanupload">
<urlpattern>^http:\/\/allyoucanupload\.webshots\.com\/v\/</urlpattern>
<searchpattern>"Image hosted by allyoucanupload\\.com"</searchpattern>
</host>

<host id="babes-board">
<urlpattern>^http:\/\/babeshack\.babes-board\.ch\/shack.php\?</urlpattern>
<searchpattern>"REPLACE: '\\/\\.php\\?image=' , '/'"</searchpattern>
</host>

<host id="babeupload">
<urlpattern>http:\/\/www\.babeupload\.com\/view\.php</urlpattern>
<searchpattern>"gallery\\/.+\\...."</searchpattern>
</host>

<host id="boxtheclown">
<urlpattern>http:\/\/www\.boxtheclown\.com\/letmesee\.aspx</urlpattern>
<searchpattern>boxtheclown</searchpattern>
</host>

<host id="campusbug">
<urlpattern>http:\/\/campusbug\.com\/pics\/viewpicture\.php\?</urlpattern>
<searchpattern>"http:\\/\\/campusbug\\.com\\/file\\.php\\?.+?s=0"</searchpattern>
</host>

<host id="chickupload">
<urlpattern>http:\/\/chickupload\.com\/showpicture\/.+\/.+\/.+</urlpattern>
<searchpattern><![CDATA[function() {
	var req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	// it knows you're leaching otherwise
	maxThreads = 1;

	req.regexp = "ID: picture";

	var the_url = getPicById(req);
	if(!the_url) {
		req.abort("Can't find image on page!");
		return;
		}

	try {
		var origFileName = this.responseText.match(/&raquo; <a href="\/gallery\/.+?\/.+?\/.+?">\w*<\/a> &raquo; (.+\.\w+)\s\(views: \w*\)/)[1];
		}
	catch(e) {
		origFileName = Math.random().toString().substring(2) + ".jpg";
		}

	doStartDownload(req, the_url, req.dirSave, req.reqURL, origFileName);
	}]]></searchpattern>
</host>

<host id="clb1">
<urlpattern>http:\/\/.+\.clb1\.com\/\?s=.+</urlpattern>
<searchpattern>function() {
	req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot &amp;&amp; !req.override_stop) return;

var pageData = this.responseText;
var theId = "redirectframe";
var someMatch = new RegExp("&lt;iframe.+?id=('|\")" + theId + "\\1.+?&gt;");
var frameElem = pageData.match(someMatch).toString();
var srcMatch = frameElem.match(/src=("|')(.+?)\1/);
var daSrc = srcMatch[2];

	var newHostFunc = getHostToUse(daSrc);
	if(!newHostFunc) throw 1;

	if(typeof(newHostFunc) == "function")
		req.hostFunc = newHostFunc;
	else if(typeof(newHostFunc) == "string") {
		req.regexp = newHostFunc;
		req.hostFunc = genericHostFunc;
		}
	else throw 1;

	req.reqURL = daSrc;
	req.retryNum++;
	req.retry();
	}</searchpattern>
</host>

<host id="cocopic">
<urlpattern>http:\/\/img[0-9]+\.cocopic\.com\/img\.php\?id</urlpattern>
<searchpattern>"ID: img"</searchpattern>
</host>

<host id="cybervice">
<urlpattern>http:\/\/www\.cybervice\.com\/files\/view</urlpattern>
<searchpattern>"http:\\/\\/www\\.cybervice\\.com\\/files\\/+?\\d\\/\\."</searchpattern>
</host>

<host id="divshare">
<urlpattern>^http:\/\/www\.divshare\.com\/download\/</urlpattern>
<searchpattern>"http:\\/\\/www\\.divshare\\.com\\/uploads\\/files"</searchpattern>
</host>

<host id="dumpanimage">
<urlpattern>^http:\/\/www\.dumpanimage\.com\/image.php\?</urlpattern>
<searchpattern>"Click to view more"</searchpattern>
</host>

<host id="dumparump">
<urlpattern>^http:\/\/www\.dumparump\.com\/view.php\?</urlpattern>
<searchpattern>"Hosted by dumpArump.com"</searchpattern>
</host>

<host id="echo">
<urlpattern>^http:\/\/img[0-9]+\.echo\.cx\/my.php\?</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="exs.cs">
<urlpattern>http:\/\/img\d+\.exs\.cx\/my\.php\?.+</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="facebook">
<urlpattern>http:\/\/.+\.facebook\.com\/photo\.php\?.+</urlpattern>
<searchpattern>"http:\\/\\/photos.+?\\.facebook\\.com\\/photos.+?\\/\\w+\\/[0-9]+?\\/[0-9]+?\\/[0-9]+?\\/.+?\\.\\w{3}"</searchpattern>
</host>

<host id="famousboard">
<urlpattern>(?:\/download\.php\?id=.+)|(?:\/download,id,.+)</urlpattern>
<searchpattern><![CDATA[function() {
	var req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var refURL = req.reqURL;

	doStartDownload(req, refURL, req.dirSave, refURL);
	}]]></searchpattern>
</host>

<host id="fap2it">
<urlpattern>http:\/\/www\.fap2it\.com\/show\.php\/.+</urlpattern>
<searchpattern>"http:\\/\\/www\\.fap2it\\.com\\/out\\.php\\/.+"</searchpattern>
</host>

<host id="fapomatic">
<urlpattern>^https?:\/\/(.*\.)?fapomatic\.com\/show\.php\?(.*&amp;)?f=.+$</urlpattern>
<searchpattern>"ID: subject"</searchpattern>
</host>

<host id="fileden">
<urlpattern>^http:\/\/www\.fileden\.com\/pview.php\?</urlpattern>
<searchpattern>"resizeMe"</searchpattern>
</host>

<host id="fotofap">
<urlpattern>http:\/\/www\.fotofap\.com\/view\/full\/.+</urlpattern>
<searchpattern>"http:\\/\\/www\\.fotofap\\.com\\/files\\/.+"</searchpattern>
</host>

<host id="freefilehosting">
<urlpattern>^http:\/\/www\.freefilehosting\.org\/public\/pview\/</urlpattern>
<searchpattern>"REPLACE: 'pview\\/' , ''"</searchpattern>
</host>

<host id="freeimagehost">
<urlpattern>^http:\/\/www\.freeimagehost\.eu\/image\/</urlpattern>
<searchpattern>"\\/dlimage\\/"</searchpattern>
</host>

<host id="freeporndumpster">
<urlpattern>^https?:\/\/.*freeporndumpster\.com\/show.php</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="friendlyimage">
<urlpattern>http:\/\/www\.friendlyimage\.com\/viewer\.php\?file=</urlpattern>
<searchpattern>"\\.\\/files\\/.+\\...."</searchpattern>
</host>

<host id="glowfoto">
<urlpattern>http:\/\/www\.glowfoto\.com\/static_image\/.+</urlpattern>
<searchpattern>"http:\\/\\/img[0-9]+\\.glowfoto\\.com\\/images\\/.+\\..."</searchpattern>
</host>

<host id="hostwhore">
<urlpattern>http:\/\/hostwhore\.com\/view\.php\/</urlpattern>
<searchpattern>"ID: img_obj"</searchpattern>
</host>

<host id="hqbeat">
<urlpattern>^http:\/\/(?:www\.)?photos\.hqbeat\.com\/viewer.php\?</urlpattern>
<searchpattern>"REPLACE: 'viewer\\.php\\?id=' , 'images/'"</searchpattern>
</host>

<host id="imageadd">
<urlpattern>http:\/\/imageadd\.com\/show\.php\/.+</urlpattern>
<searchpattern>"ID: img_obj"</searchpattern>
</host>

<host id="imagebam">
<urlpattern>http:\/\/www\.imagebam\.com\/image\/.+</urlpattern>
<searchpattern>"ID: image"</searchpattern>
</host>

<host id="imagebanana">
<urlpattern>http:\/\/www\.imagebanana\.com\/view\/.+\/.+</urlpattern>
<searchpattern>"http:\\/\\/www\\.imagebanana\\.com\\/img\\/.+\\/.+"</searchpattern>
</host>

<host id="imagebeaver">
<urlpattern>^https?:\/\/.*imagebeaver\.com\/(?:photos|view).php</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagebeaver2">
<urlpattern>^https?:\/\/.*imagebeaver\.com\/photos\/.*\d+_\d+-.+</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagecrack">
<urlpattern>http:\/\/imagecrack\.com\/public\/.+\/\d+\/</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagedemon">
<urlpattern>^https?:\/\/www.imagedemon\.com\/image\.asp\?</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagefap">
<urlpattern>^http:\/\/www\.imagefap\.com\/image\.php\?</urlpattern>
<searchpattern><![CDATA[function() {
	req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var refURL = req.reqURL;

	if (this.responseText.match("I am over 18"))
		{
		alert("Please go manually verify with imagefap, making sure not to clear the cookies.");
		return;
		}

	
	// this lD is some value in the imagefap source page that is coded in some fashion or another
	// this value is responsible for telling us where the image is located
	var lD = this.responseText.match(/return lD\(('|")(.+)\1\);/)[2];
	
	// The following four lines comes from the imagefap source page (it's escaped, so you wouldn't
	// be able to find it by merely skimming through it)
	var s1=unescape(lD.substr(0,lD.length-1)); 
	var t=''; 
	for(i=0;i<s1.length;i++) t+=String.fromCharCode(s1.charCodeAt(i)-lD.substr(lD.length-1,1)); 
	var the_url =  unescape(t);
	if(the_url) doStartDownload(req, the_url,req.dirSave,refURL);
	}]]></searchpattern>
</host>

<host id="imageflea">
<urlpattern>http:\/\/www\.imageflea\.com\/.+\/gallery\/.+\/.+\/\?p=.+</urlpattern>
<searchpattern>"\\/pics\\/\\d+/.+"</searchpattern>
</host>

<host id="imagefly">
<urlpattern>^http:\/\/ifs[0-9]+\.imagefly\.info\/</urlpattern>
<searchpattern>"Image might be resized to fit the screen, Click on the image for LiveResize"</searchpattern>
</host>

<host id="imagefoco">
<urlpattern>http:\/\/img\d+\.imagefoco\.com\/img\.php</urlpattern>
<searchpattern>"ID: img"</searchpattern>
</host>

<host id="imagehaven">
<urlpattern>http:\/\/img[0-9]+\.imagehaven\.net\/img\.php\?</urlpattern>
<searchpattern>"ID: Bild"</searchpattern>
</host>

<host id="imagehigh">
<urlpattern>^https?:\/\/(.*\.)?imagehigh\.com\/view\.php\?(.*&amp;)?id=.+$</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagereverb">
<urlpattern>^http:\/\/www\.imagereverb\.com\/adult\/showimage\.php\?</urlpattern>
<searchpattern>"ID: picture"</searchpattern>
</host>

<host id="imageshack">
<urlpattern>^http:\/\/img[0-9]+\.imageshack\.us\/my.php\?</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imageshadow">
<urlpattern>^http:\/\/www\.imageshadow\.com\/view\.php</urlpattern>
<searchpattern>"ID: imagen"</searchpattern>
</host>

<host id="imageshappy">
<urlpattern>http:\/\/imageshappy\.com\/viewer\.php\?id=.+</urlpattern>
<searchpattern>"\\.\\/images\\/.+\\...."</searchpattern>
</host>

<host id="imageshock">
<urlpattern>^http:\/\/imageshock\.eu</urlpattern>
<searchpattern>"REPLACE: '\\/\\?img=' , '/img/'"</searchpattern>
</host>

<host id="imagesocket">
<urlpattern>^http:\/\/imagesocket\.com\/view\/.+</urlpattern>
<searchpattern>"http:\\/\\/content\.imagesocket\.com\\/images\\/.+"</searchpattern>
</host>

<host id="imagesplace">
<urlpattern>http:\/\/www\.imagesplace\.net\/gallery\.php</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="imagevenue">
<urlpattern>^https?:\/\/img[0-9]+\.imagevenue\.com\/(img|view)\.php\?(.*&amp;)?image=</urlpattern>
<searchpattern><![CDATA[function() {
	var req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var refURL = req.reqURL;

	if (this.responseText.match(/View Image/))
		{
		updateDownloadProgress(null, req.uniqID, null, null, "Redirecting Request");
		write_text("Redirecting " + refURL + " to the actual image.");
		req.retryNum++;
		req.reqURL = refURL + '&i=1';
		req.retry();
		}

	else if (this.responseText.match(/This image does not exist on this server/)) {
		write_text("The image, " + refURL + ", no longer exists.");
		updateDownloadProgress(null, req.uniqID, null, null, "Image Does Not Exist On Server");
		req.queueHandler();
		}
		
	else
		{
		var born = refURL.match(/^https?:\/\/img[0-9]+\.imagevenue\.com\//);
		var the_url = getImgSrcById(this.responseText, 'thepic');
		if(!the_url) {
			var retry_dick = "(" + String(maxRetries - req.retryNum + 1) + " of " + String(maxRetries) + ")";
			updateDownloadProgress(null, req.uniqID, null, null, "Incomplete Request.  Retrying " + retry_dick);
			write_text(refURL + " didn't finish loading.  Retrying (attempt #" + String(maxRetries-req.retryNum+1) + ")");
			req.retry();
			return;
			}

	
		if (the_url) {
			the_url = born + the_url;
			doStartDownload(req, the_url, req.dirSave, refURL);
			}
	

	
		}
	}]]></searchpattern>
</host>

<host id="imagewaste">
<urlpattern>http:\/\/www\.imagewaste\.com\/ih\/pictures\/</urlpattern>
<searchpattern>"\\/ih\\/pictures\\/big\\/"</searchpattern>
</host>

<host id="keepmyfile">
<urlpattern>^http:\/\/www\.keepmyfile\.com\/image\/</urlpattern>
<searchpattern>"free image hosting by keepmyfile.com"</searchpattern>
</host>

<host id="linkbucks">
<urlpattern>http:\/\/www\.linkbucks\.com\/link\/.+</urlpattern>
<searchpattern><![CDATA[function() {
	req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var frameElems = getFrameTags(this.responseText);

	var numElems = frameElems.length - 1;

	var daSrc = getImgSrcFromTag(frameElems[numElems]);

	var newHostFunc = getHostToUse(daSrc);
	if(!newHostFunc) throw 1;

	if(typeof(newHostFunc) == "function")
		req.hostFunc = newHostFunc;
	else if(typeof(newHostFunc) == "string") {
		req.regexp = newHostFunc;
		req.hostFunc = genericHostFunc;
		}
	else throw 1;

	req.reqURL = daSrc;
	req.retryNum++;
	req.retry();
	}]]></searchpattern>
</host>

<host id="mexaupload">
<urlpattern>http:\/\/www\.mexaupload\.com\/show\.php\/</urlpattern>
<searchpattern>"http:\\/\\/www\\.mexaupload\\.com\\/out\\.php\\/i.+"</searchpattern>
</host>

<host id="monkeymedia">
<urlpattern>http:\/\/monkeymediaimagehosting\.com\/v\/.+\.html</urlpattern>
<searchpattern>"\\/d\\/.+\\/.+\\...."</searchpattern>
</host>

<host id="myphotos">
<urlpattern>^http:\/\/celebs\.myphotos\.cc\/hosting2\/public\/pview\/</urlpattern>
<searchpattern>"REPLACE: 'pview\\/' , ''"</searchpattern>
</host>

<host id="myspace">
<urlpattern>^http:\/\/viewmorepics\.myspace\.com\/index\.cfm\?fuseaction=viewImage</urlpattern>
<searchpattern>"ID: ctl00_Main_ucImageView_imgUserImage"</searchpattern>
</host>

<host id="nued">
<urlpattern>http:\/\/www\.neud\.org\/image\.php</urlpattern>
<searchpattern>"ID: thepic"</searchpattern>
</host>

<host id="paintedover">
<urlpattern>^http:\/\/paintedover\.com\/uploads\/show\.php\?</urlpattern>
<searchpattern>"subject"</searchpattern>
</host>

<host id="photobucket">
<urlpattern>http:\/\/(?:s[0-9]+|.+)\.photobucket\.com\/albums\/.+\/\?action=view\&amp;current=.+\....</urlpattern>
<searchpattern>"REPLACE: 'http:\\/\\/(.+)\\.photobucket\\.com\\/albums\\/(.+)\\/.+current=(.+\\....)' , 'http://$1.photobucket.com/albums/$2/$3'"</searchpattern>
</host>

<host id="picsie">
<urlpattern>http:\/\/www\.picsie\.com\/image\/#.+</urlpattern>
<searchpattern>"REPLACE: '#(.+)' , 'files/$1'"</searchpattern>
</host>

<host id="piczhost">
<urlpattern>http:\/\/www\.piczhost\.com\/viewer\.php\?file=.+</urlpattern>
<searchpattern>"\\.\\/files\\/.+\\...."</searchpattern>
</host>

<host id="pimpshare">
<urlpattern>http:\/\/img[0-9]+\.pimpshare\.com\/i\.php\?i=.+</urlpattern>
<searchpattern>"http:\\/\\/img[0-9]+\\.pimpshare\\.com\\/i\\/.+\\...."</searchpattern>
</host>

<host id="pixloads">
<urlpattern>^http:\/\/pixloads\.com\/public\/pview\/</urlpattern>
<searchpattern>"REPLACE: 'pview\\/' , ''"</searchpattern>
</host>

<host id="porn.jj">
<urlpattern>http:\/\/porn\.jj\.am\/gallery\/.+\/.+\/.+\/.+\....\.....</urlpattern>
<searchpattern>"\\/gallery\\/.+\\/.+\\/.+\...."</searchpattern>
</host>

<host id="pussyupload">
<urlpattern>^http:\/\/www\.pussyupload\.com\/view.php\?</urlpattern>
<searchpattern>"gallery\\/[0-9]([0-9]|.)+\\...."</searchpattern>
</host>

<host id="radikal">
<urlpattern>http:\/\/radikal\.ru\/.+\/i\d+\.radikal\.ru\/.+</urlpattern>
<searchpattern>"http:\\/\\/i\\d+\\.radikal\\.ru/\\d+/.+"</searchpattern>
</host>

<host id="shareapic">
<urlpattern>^http:\/\/www\.shareapic\.net\/content.php\?</urlpattern>
<searchpattern><![CDATA[function() {
	var req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var refURL = req.reqURL;

	var poop = getImgTags(this.responseText);
	var the_url = "";

	for (i=0;i<poop.length;i++) { 
		var shit = poop[i].match(/http:\/\/images\.shareapic\.net\/images(\d+)\/(.+?)"/); 
		if (shit) the_url = "http://images.shareapic.net/fullsize"+ shit[1] + "/" + shit[2];
		}

	doStartDownload(req, the_url, req.dirSave, refURL);
	}]]></searchpattern>
</host>

<host id="shareloading">
<urlpattern>^http:\/\/www\.shareloading\.com\/file\.php\?</urlpattern>
<searchpattern>"\\/share[0-9]+\\/"</searchpattern>
</host>

<host id="sicknote">
<urlpattern>http:\/\/scans\.sicknote\.org\.uk\/pictures\/.+\/.+(?:_\d+\/)$</urlpattern>
<searchpattern>"ID: ts"</searchpattern>
</host>

<host id="skins.be">
<urlpattern>http:\/\/image\.skins\.be\/\d+\/.+</urlpattern>
<searchpattern>"ID: wallpaper_image"</searchpattern>
</host>

<host id="snapshotgirlz">
<urlpattern>http:\/\/www\.snapshotgirlz\.com\/snapshotz\/view\.php\/</urlpattern>
<searchpattern>"http:\\/\\/www\\.snapshotgirlz\\.com\\/snapshotz\\/images\\.php\\/.+\\...."</searchpattern>
</host>

<host id="squirrelturd">
<urlpattern>^https?:\/\/squirrelturd\.com\/img\.php</urlpattern>
<searchpattern>"images\\/photos"</searchpattern>
</host>

<host id="storeimgs">
<urlpattern>http:\/\/storeimgs\.com\/(out|show)\.php\/.+</urlpattern>
<searchpattern>"http:\\/\\/storeimgs\\.com\\/out\\.php\\/.+"</searchpattern>
</host>

<host id="storepics">
<urlpattern>http:\/\/storepics\.net\/view\/.+</urlpattern>
<searchpattern>"http:\\/\\/img1\\.storepics\\.net\\/.+?\\/\\d+\\/.+"</searchpattern>
</host>

<host id="studio31">
<urlpattern>http:\/\/.+\.studio31\.org\/.+\/index\.php\?album=.+&amp;image=.+</urlpattern>
<searchpattern>"REPLACE: '(http:\\/\\/.+\\.studio31\\.org\\/.+\\/index\\.php\\?album=.+&amp;image=.+)', '$1&amp;p=*full-image'"</searchpattern>
</host>

<host id="supload">
<urlpattern>^http:\/\/www\.supload\.(com|us)\/free\/</urlpattern>
<searchpattern>"http:\\/\\/.+\\.supload\\.(com|us)\\/\\.\\/files"</searchpattern>
</host>

<host id="taod">
<urlpattern>http:\/\/www\.taod\.com\/modules\.php\?name=gal&amp;file=photo&amp;a=\d+&amp;p=\d+</urlpattern>
<searchpattern><![CDATA[function() {
	var req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var refURL = req.reqURL;

	if (this.responseText.match(/gal\/preview/))
		{
		updateDownloadProgress(null, req.uniqID, null, null, "Redirecting Request");
		write_text("Redirecting " + refURL + " to the actual image.");
		req.retryNum++;

		var poop = getLinks(this.responseText);
		var cock = "";

		for (i=0;i<poop.length;i++) { 
			var shit = poop[i].match(/modules\.php\?name=gal&file=photo&a=\d+&p=\d+&f=(\d+)/); 
			if (shit) cock = shit[1];
			}

		req.reqURL = refURL + '&f=' + cock;
		req.retry();
		}

	else
		{
		var img_tags = getImgTags(this.responseText);

		for (i=0; i < img_tags.length; i++) {
			if (img_tags[i].match(/gal\/albums/)) {
				the_url = getImgSrcFromTag(img_tags[i]);
				}
			}

		the_url = "http://www.taod.com" + the_url;
		doStartDownload(req, the_url, req.dirSave, refURL);
		}
	}]]></searchpattern>
</host>

<host id="theimagehosting">
<urlpattern>^http:\/\/server[0-9]+\.theimagehosting\.com\/image\.php\?(.*&amp;)?img=.+$</urlpattern>
<searchpattern>"hosted by TheImageHosting.com"</searchpattern>
</host>

<host id="tinypic">
<urlpattern>^https?:\/\/(.*\.)?tinypic.com\/view\/\?(.*&amp;)?pic=.+$</urlpattern>
<searchpattern>"Image hosting by TinyPic"</searchpattern>
</host>

<host id="toppichost">
<urlpattern>http:\/\/www\.toppichost\.com\/nsfw\/viewer\.php\?file=.+</urlpattern>
<searchpattern>"\\.\\/files\\/.+\\...."</searchpattern>
</host>

<host id="uploadem">
<urlpattern>^http:\/\/www\.uploadem\.com\/view</urlpattern>
<searchpattern>"http:\\/\\/i[0-9]+\\.uploadem\\.com\\/[0-9]+\\/"</searchpattern>
</host>

<host id="upqt">
<urlpattern>^http:\/\/upqt\.com\/image.asp\?</urlpattern>
<searchpattern>"uploads"</searchpattern>
</host>

<host id="urlcash">
<urlpattern>^http:\/\/.*urlcash\.net\/</urlpattern>
<searchpattern><![CDATA[function() {
	req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var frameElems = getFrameTags(this.responseText);

	var numElems = frameElems.length - 1;

	var daSrc = getImgSrcFromTag(frameElems[numElems].replace(/'/g, ""));

	var newHostFunc = getHostToUse(daSrc);
	if(!newHostFunc) throw 1;

	if(typeof(newHostFunc) == "function")
		req.hostFunc = newHostFunc;
	else if(typeof(newHostFunc) == "string") {
		req.regexp = newHostFunc;
		req.hostFunc = genericHostFunc;
		}
	else throw 1;

	req.reqURL = daSrc;
	req.retryNum++;
	req.retry();
	}]]></searchpattern>
</host>

<host id="usercash">
<urlpattern>^http:\/\/.*usercash\.com\/</urlpattern>
<searchpattern><![CDATA[function() {
	req = this.parent;
	req.callwrapper.cancel();

	var prefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);
	var toDieOrNot = prefManager.getBoolPref("extensions.imagegrabber.killmenow");
	if (toDieOrNot && !req.override_stop) return;

	var frameElems = getFrameTags(this.responseText);

	var numElems = frameElems.length - 1;

	var daSrc = getImgSrcFromTag(frameElems[numElems]);

	var newHostFunc = getHostToUse(daSrc);
	if(!newHostFunc) throw 1;

	if(typeof(newHostFunc) == "function")
		req.hostFunc = newHostFunc;
	else if(typeof(newHostFunc) == "string") {
		req.regexp = newHostFunc;
		req.hostFunc = genericHostFunc;
		}
	else throw 1;

	req.reqURL = daSrc;
	req.retryNum++;
	req.retry();
	}]]></searchpattern>
</host>

<host id="videolist.biz">
<urlpattern>http:\/\/videolist\.biz\/host\/photo\/view\.php</urlpattern>
<searchpattern>"ID: image"</searchpattern>
</host>

<host id="webshots">
<urlpattern>^http:\/\/entertainment\.webshots\.com\/photo\/</urlpattern>
<searchpattern>"http:\\/\\/image[0-9]+\\.webshots\\.com"</searchpattern>
</host>

<host id="xs.to">
<urlpattern>^http?:\/\/xs\.to\/xs\.php\?(.*&amp;)?h=.+$</urlpattern>
<searchpattern>"https\\?:\\/\\/xs[0-9]+\\.xs\\.to"</searchpattern>
</host>

<host id="zshare">
<urlpattern>^http:\/\/www\.zshare\.net\/image\/</urlpattern>
<searchpattern>"ID: image"</searchpattern>
</host>
</root>